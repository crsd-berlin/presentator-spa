(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-355ed338"],{"0372":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.activeScreen?i("div",{directives:[{name:"shortcut",rawName:"v-shortcut.37",value:e.goToPrevScreen,expression:"goToPrevScreen",modifiers:{37:!0}},{name:"shortcut",rawName:"v-shortcut.39",value:e.goToNextScreen,expression:"goToNextScreen",modifiers:{39:!0}}],staticClass:"preview-screen-holder",class:[e.activePrototype.isForDesktop?"desktop":"mobile","align-"+e.activeScreen.alignment,e.inTransition?"transitioning":"",e.overlayScreen?"overlay-active":"","transition-"+e.activeTransition]},[e.screens.length>1?[i("nav",{staticClass:"preview-nav nav-left",class:{"nav-disabled":0==e.activeScreenOrderedIndex},attrs:{title:e.$t("Prev screen")},on:{click:function(t){return t.preventDefault(),e.goToPrevScreen()}}},[i("i",{staticClass:"fe fe-chevron-left"})]),i("nav",{staticClass:"preview-nav nav-right",class:{"nav-disabled":e.orderedScreens.length==e.activeScreenOrderedIndex+1},attrs:{title:e.$t("Next screen")},on:{click:function(t){return t.preventDefault(),e.goToNextScreen()}}},[i("i",{staticClass:"fe fe-chevron-right"})])]:e._e(),i("div",{ref:"activeScreenWrapper",staticClass:"screen-wrapper",style:{width:e.activePrototype.width?e.activePrototype.width+"px":null,height:e.activePrototype.height?e.activePrototype.height+"px":null,background:e.activeScreen.background||null},attrs:{tabindex:"-1"}},[e.interactions&&e.activeScreen.fixedHeader>0&&!e.inTransition?i("div",{staticClass:"fixed-screen-header",style:{height:e.activeScreen.fixedHeader*e.scaleFactor+"px","margin-top":-e.activeScreen.fixedHeader*e.scaleFactor+"px"}},[i("div",{staticClass:"fixed-screen-overflow-wrapper"},[i("div",{staticClass:"fixed-screen-content-wrapper"},[i("img",{directives:[{name:"scale",rawName:"v-scale",value:e.activePrototype.scaleFactor,expression:"activePrototype.scaleFactor"}],staticClass:"fixed-screen",attrs:{src:e.activeScreen.getImage(),alt:e.activeScreen.title}}),i("div",{staticClass:"block preview-hotspots-block"},e._l(e.activeScreenHotspots,function(t){return t.top<e.activeScreen.fixedHeader?i("div",{key:"fixed_header_hotspot_"+t.id,staticClass:"hotspot",style:{left:t.left*e.scaleFactor+"px",top:t.top*e.scaleFactor+"px",width:t.width*e.scaleFactor+"px",height:t.height*e.scaleFactor+"px"},on:{click:function(i){return i.preventDefault(),e.hotspotNavigate(t.id)}}}):e._e()}),0)])])]):e._e(),i("div",{staticClass:"screen-inner-wrapper"},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.oldActiveScreen&&e.inTransition,expression:"oldActiveScreen && inTransition"},{name:"scale",rawName:"v-scale",value:e.activePrototype.scaleFactor,expression:"activePrototype.scaleFactor"}],staticClass:"screen old-active-screen",style:{background:e.oldActiveScreen?e.oldActiveScreen.background:null},attrs:{src:e.oldActiveScreen?e.oldActiveScreen.getImage():"",alt:e.oldActiveScreen?e.oldActiveScreen.title:""}}),i("img",{directives:[{name:"tooltip",rawName:"v-tooltip.follow",value:e.activeScreenTooltip,expression:"activeScreenTooltip",modifiers:{follow:!0}},{name:"scale",rawName:"v-scale",value:e.activePrototype.scaleFactor,expression:"activePrototype.scaleFactor"}],key:"active_screen_"+e.activeScreen.id,ref:"activeScreen",staticClass:"screen",class:e.inTransition?"new-active-screen":"current-active-screen",attrs:{crossorigin:"anonymous",draggable:"false",src:e.activeScreen.getImage(),alt:e.activeScreen.title},on:{load:function(t){return e.refreshActiveScreenWrapperAlignment()},mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),t.preventDefault(),e.$emit("activeScreenMousedown",t))},click:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),t.preventDefault(),e.$emit("activeScreenClick",t))},e.onOverlayOutsideClick]}}),e.interactions&&e.overlayScreen?i("div",{staticClass:"overlay-screen-wrapper",class:["transition-"+e.overlayScreenTransition,"position-"+e.overlayScreenPosition,e.isOverlayScreenClosing?"closing":""],style:{"margin-top":e.overlayScreenOffsetTop+"px","margin-bottom":e.overlayScreenOffsetBottom+"px","margin-left":e.overlayScreenOffsetLeft+"px","margin-right":e.overlayScreenOffsetRight+"px"}},[i("img",{directives:[{name:"scale",rawName:"v-scale",value:e.activePrototype.scaleFactor,expression:"activePrototype.scaleFactor"}],staticClass:"screen overlay-screen",attrs:{src:e.overlayScreen.getImage(),alt:e.overlayScreen.title}}),i("div",{staticClass:"block preview-hotspots-block"},e._l(e.overlayScreenHotspots,function(t){return i("div",{key:"overlay_screen_hotspot_"+t.id,staticClass:"hotspot",style:{left:t.left*e.scaleFactor+"px",top:t.top*e.scaleFactor+"px",width:t.width*e.scaleFactor+"px",height:t.height*e.scaleFactor+"px"},on:{click:function(i){return i.preventDefault(),e.hotspotNavigate(t.id)}}})}),0)]):e._e(),e.interactions?i("div",{staticClass:"block preview-hotspots-block"},e._l(e.activeScreenHotspots,function(t){return i("div",{key:"active_screen_hotspot_"+t.id,staticClass:"hotspot",style:{left:t.left*e.scaleFactor+"px",top:t.top*e.scaleFactor+"px",width:t.width*e.scaleFactor+"px",height:t.height*e.scaleFactor+"px"},on:{click:function(i){return i.preventDefault(),e.hotspotNavigate(t.id)}}})}),0):e._e(),e._t("default")],2),e.interactions&&e.activeScreen.fixedFooter>0&&!e.inTransition?i("div",{staticClass:"fixed-screen-footer",style:{height:e.activeScreen.fixedFooter*e.scaleFactor+"px","margin-top":-e.activeScreen.fixedFooter*e.scaleFactor+"px"}},[i("div",{staticClass:"fixed-screen-overflow-wrapper"},[i("div",{staticClass:"fixed-screen-content-wrapper"},[i("img",{directives:[{name:"scale",rawName:"v-scale",value:e.activePrototype.scaleFactor,expression:"activePrototype.scaleFactor"}],staticClass:"fixed-screen",attrs:{src:e.activeScreen.getImage(),alt:e.activeScreen.title}}),i("div",{staticClass:"block preview-hotspots-block"},e._l(e.activeScreenHotspots,function(t){return i("div",{key:"fixed_footer_hotspot_"+t.id,staticClass:"hotspot",style:{left:t.left*e.scaleFactor+"px",top:t.top*e.scaleFactor+"px",width:t.width*e.scaleFactor+"px",height:t.height*e.scaleFactor+"px"},on:{click:function(i){return i.preventDefault(),e.hotspotNavigate(t.id)}}})}),0)])])]):e._e()])],2):e._e()},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),r=i("2f62"),c=i("dd93");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var m=400,d={name:"screen-preview",props:{interactions:{type:Boolean,default:!0},activeScreenTooltip:{type:String,default:""}},data:function(){return{oldActiveScreenId:null,activeTransition:"none",inTransition:!1,overlayScreenId:null,overlayScreenPosition:"centered",overlayScreenTransition:"none",overlayScreenOffsetTop:0,overlayScreenOffsetBottom:0,overlayScreenOffsetLeft:0,overlayScreenOffsetRight:0,overlayScreenOutsideClose:!0,isOverlayScreenClosing:!1}},computed:l({},Object(r["d"])({activeScreenId:function(e){return e.screens.activeScreenId},screens:function(e){return e.screens.screens},scaleFactor:function(e){return e.screens.scaleFactor},hotspots:function(e){return e.hotspots.hotspots},hotspotTemplates:function(e){return e.hotspots.hotspotTemplates}}),{},Object(r["c"])({activePrototype:"prototypes/activePrototype",getScreen:"screens/getScreen",activeScreen:"screens/activeScreen",orderedScreens:"screens/orderedScreens",activeScreenOrderedIndex:"screens/activeScreenOrderedIndex",getHotspot:"hotspots/getHotspot",getHotspotTemplate:"hotspots/getHotspotTemplate",getHotspotsForScreen:"hotspots/getHotspotsForScreen"}),{oldActiveScreen:function(){return this.getScreen(this.oldActiveScreenId)},overlayScreen:function(){return this.getScreen(this.overlayScreenId)},activeScreenHotspots:function(){return this.getHotspotsForScreen(this.activeScreenId)},overlayScreenHotspots:function(){return this.getHotspotsForScreen(this.overlayScreenId)}}),watch:{interactions:function(e,t){this.closeOverlayScreen()},activeScreenId:function(e,t){this.oldActiveScreenId=t,this.onActiveScreenChange()},"activeScreen.alignment":function(e,t){e!==t&&this.refreshActiveScreenWrapperAlignment()}},mounted:function(){this.onActiveScreenChange()},methods:l({},Object(r["b"])({setActiveScreenId:"screens/setActiveScreenId",setScreens:"screens/setScreens",setScaleFactor:"screens/setScaleFactor"}),{changeActiveScreen:function(e,t,i){var s=this,n=this.getScreen(e);n&&(i||e!==this.activeScreenId)&&(this.$emit("beforeActiveScreenChange",this.activeScreenId,e),this.inTransition=!1,this.activeTransition=t||"none",this.oldActiveScreenId=this.activeScreenId,this.screenChangeTimeoutId&&clearTimeout(this.screenChangeTimeoutId),this.screenChangeTimeoutId=setTimeout(function(){s.setActiveScreenId(e),"none"!==s.activeTransition&&(s.inTransition=!0,s.screenChangeAnimationTimeoutId&&clearTimeout(s.screenChangeAnimationTimeoutId),s.screenChangeAnimationTimeoutId=setTimeout(function(){s.activeTransition="none",s.inTransition=!1},m)),s.$emit("afterActiveScreenChange",s.oldActiveScreenId,s.activeScreenId)},"none"!==this.activeTransition?100:0))},onActiveScreenChange:function(){var e=this;this.activeScreen&&(0!=this.activePrototype.scaleFactor?this.setScaleFactor(this.activePrototype.scaleFactor):c["a"].loadImage(this.activeScreen.getImage()).then(function(t){t.success&&t.width>0&&setTimeout(function(){e.$refs.activeScreen&&e.setScaleFactor(e.$refs.activeScreen.clientWidth/t.width)},0)}),this.closeOverlayScreen(),this.refreshActiveScreenWrapperAlignment(),this.$setDocumentTitle(function(){return e.$t("Screen")+" "+e.activeScreen.title}),this.$refs.activeScreenWrapper&&this.$refs.activeScreenWrapper.focus())},goToPrevScreen:function(){this.orderedScreens[this.activeScreenOrderedIndex-1]&&this.setActiveScreenId(this.orderedScreens[this.activeScreenOrderedIndex-1].id)},goToNextScreen:function(){this.orderedScreens[this.activeScreenOrderedIndex+1]&&this.setActiveScreenId(this.orderedScreens[this.activeScreenOrderedIndex+1].id)},refreshActiveScreenWrapperAlignment:function(){var e=this;this.$nextTick(function(){e.$refs.activeScreenWrapper&&(e.activeScreen.isLeftAligned?e.$refs.activeScreenWrapper.scrollLeft=0:e.activeScreen.isRightAligned?e.$refs.activeScreenWrapper.scrollLeft=e.$refs.activeScreenWrapper.scrollWidth:e.$refs.activeScreenWrapper.scrollLeft=(e.$refs.activeScreenWrapper.scrollWidth-e.$refs.activeScreenWrapper.offsetWidth)/2)})},hotspotNavigate:function(e){var t=this.getHotspot(e);if(t){var i=t.settings.transition||"none";"url"===t.type?window.open(t.settings.url||"#","_blank"):"prev"===t.type?this.orderedScreens[this.activeScreenOrderedIndex-1]&&this.changeActiveScreen(this.orderedScreens[this.activeScreenOrderedIndex-1].id,i):"next"===t.type?this.orderedScreens[this.activeScreenOrderedIndex+1]&&this.changeActiveScreen(this.orderedScreens[this.activeScreenOrderedIndex+1].id,i):"back"===t.type?this.overlayScreenId?this.closeOverlayScreen():this.oldActiveScreen&&this.changeActiveScreen(this.oldActiveScreen.id,i):"screen"===t.type?this.changeActiveScreen(t.settings.screenId,i):"overlay"===t.type?this.openOverlayScreen(t.settings.screenId,i,t.settings.outsideClose,t.settings.overlayPosition,t.settings.offsetTop,t.settings.offsetBottom,t.settings.offsetLeft,t.settings.offsetRight):"scroll"===t.type&&this.$refs.activeScreenWrapper&&this.$refs.activeScreenWrapper.scrollTo({behavior:"smooth",top:t.settings.scrollTop<<0,left:t.settings.scrollLeft<<0})}},openOverlayScreen:function(e,t,i,s,n,o,r,a){var l=this;e!=this.overlayScreenId&&this.closeOverlayScreen(function(){l.isOverlayScreenClosing=!1,l.overlayScreenId=e,l.overlayScreenTransition=t||"none",l.overlayScreenPosition=s||"centered",l.overlayScreenOffsetTop=n<<0,l.overlayScreenOffsetBottom=o<<0,l.overlayScreenOffsetLeft=r<<0,l.overlayScreenOffsetRight=a<<0,l.overlayScreenOutsideClose=!!c["a"].isEmpty(i)||i})},closeOverlayScreen:function(e){var t=this;this.overlayScreenId?(this.isOverlayScreenClosing=!0,this.overlayCloseAnimationTimeoutId&&clearTimeout(this.overlayCloseAnimationTimeoutId),this.overlayCloseAnimationTimeoutId=setTimeout(function(){t.isOverlayScreenClosing=!0,t.overlayScreenId=null,t.overlayScreenPosition="centered",t.overlayScreenTransition="none",t.overlayScreenOffsetTop=0,t.overlayScreenOffsetBottom=0,t.overlayScreenOffsetLeft=0,t.overlayScreenOffsetRight=0,t.overlayScreenOutsideClose=!0,c["a"].isFunction(e)&&e()},"none"!=this.overlayScreenTransition?m:0)):c["a"].isFunction(e)&&e()},onOverlayOutsideClick:function(e){this.overlayScreenId&&this.overlayScreenOutsideClose&&(e.preventDefault(),e.stopPropagation(),this.closeOverlayScreen())}})},p=d,h=i("2877"),u=Object(h["a"])(p,s,n,!1,null,null,null);t["a"]=u.exports},"35bb":function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("a481");var s=i("bd86"),n=i("2f62"),o=i("f744"),r=i("dd93"),c=i("46a0");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}t["a"]={data:function(){return{isLoadingComments:!1,showResolvedComments:!1,mentionsList:[]}},computed:l({},Object(n["d"])({activePrototypeId:function(e){return e.prototypes.activePrototypeId},activeScreenId:function(e){return e.screens.activeScreenId},scaleFactor:function(e){return e.screens.scaleFactor},previewToken:function(e){return e.preview.previewToken},unreadComments:function(e){return e.notifications.unreadComments}}),{},Object(n["c"])({getCommentsForScreen:"comments/getCommentsForScreen",getUnreadCommentsForScreen:"notifications/getUnreadCommentsForScreen"}),{activeScreenComments:function(){return this.getCommentsForScreen(this.activeScreenId)},totalActiveScreenComments:function(){return this.activeScreenComments.length},activeScreenResolvedComments:function(){return this.getCommentsForScreen(this.activeScreenId,"resolved")},totalActiveScreenResolvedComments:function(){return this.activeScreenResolvedComments.length},activeUnreadComments:function(){return this.getUnreadCommentsForScreen(this.activeScreenId)}}),watch:{activeUnreadComments:function(e,t){for(var i in e)e[i].replyTo||this.addComment(e[i])}},methods:l({},Object(n["b"])({setComments:"comments/setComments",addComment:"comments/addComment",appendComments:"comments/appendComments"}),{convertCollaboratorsListToMentionsList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e=e||[];for(var i=[],s=e.length-1;s>=0;s--)if(!(t.indexOf(e[s].email)>=0)){var n=((e[s].firstName||"")+(e[s].lastName||"")).trim();i.push({value:e[s].email,label:n?n+" ("+e[s].email+")":e[s].email})}return i},isCommentUnread:function(e){for(var t in this.activeUnreadComments)if(this.activeUnreadComments[t].id==e||this.activeUnreadComments[t].replyTo==e)return!0;return!1},loadComments:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=e||this.activePrototypeId,e&&!this.isLoadingComments){this.isLoadingComments=!0;var n=null;o["a"].enableAutoCancellation(!1),n=s?o["a"].Previews.getScreenCommentsList(this.previewToken,i,100,{envelope:!0,"search[prototypeId]":e,"search[replyTo]":0}):o["a"].ScreenComments.getList(i,100,{envelope:!0,"search[prototypeId]":e,"search[replyTo]":0}),n.finally(function(){t.isLoadingComments=!1}).then(function(n){var o=r["a"].getNestedVal(n,"data.response",[]),c=r["a"].getNestedVal(n,"data.headers.x-pagination-current-page",1),a=r["a"].getNestedVal(n,"data.headers.x-pagination-page-count",1);1==i?t.setComments(o):t.appendComments(o),a>c&&t.loadComments(e,i+1,s),t.$route.query.commentId&&setTimeout(function(){t.viewComment(t.$route.query.commentId)},300)}).catch(function(e){t.$errResponseHandler(e)})}},initCommentCreation:function(e,t){var i=this;if(this.isInCommentsMode){t=t||this.activeScreenId;var s=new c["a"]({screenId:t,left:this.scaleFactor>0?e.offsetX/this.scaleFactor:e.offsetX,top:this.scaleFactor>0?e.offsetY/this.scaleFactor:e.offsetY});this.addComment(s),this.$nextTick(function(){if(i.$refs.screenCommentPins){var e=i.$refs.screenCommentPins[i.$refs.screenCommentPins.length-1];e&&e.activate()}})}},viewComment:function(e){if(this.$refs.screenCommentPins)for(var t in this.$refs.screenCommentPins){var i=this.$refs.screenCommentPins[t];if(i.comment&&i.comment.id==e){"resolved"===i.comment.status&&(this.showResolvedComments=!0),i.activate();break}}},deactivateComments:function(){this.$refs.commentPopover&&this.$refs.commentPopover.close();var e=[];if(this.$refs.screenCommentPins)for(var t in this.$refs.screenCommentPins)this.$refs.screenCommentPins[t].isActive&&(this.$refs.screenCommentPins[t].deactivate(),e.push(this.$refs.screenCommentPins[t].comment.id));if(this.$route.query.commentId&&r["a"].inArray(e,this.$route.query.commentId)){var i=Object.assign({},this.$route.query);delete i.commentId,this.$router.replace({name:this.$route.name,params:Object.assign({},this.$route.params),query:i})}},onCommentPopoverClose:function(){this.deactivateComments()},onCommentActivate:function(e,t){this.deactivateComments(),this.$refs.commentPopover&&(this.$refs.commentPopover.open(e,t),e.id&&this.$route.query.commentId!=e.id&&this.$router.replace({name:this.$route.name,params:Object.assign({},this.$route.params),query:Object.assign({},this.$route.query,{commentId:e.id})}))},onCommentRepositioning:function(e,t){this.$refs.commentPopover&&this.$refs.commentPopover.reposition(t)}})}},"7bbf":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("dragger",{staticClass:"comment-pin",class:{new:!e.comment.id,completed:e.comment.isResolved,active:e.isActive,loader:e.isProcessing},style:{left:e.comment.left*e.scaleFactor+"px",top:e.comment.top*e.scaleFactor+"px"},attrs:{"data-id":e.comment.id,enable:e.allowPositionChange,wrapperSelector:".screen-inner-wrapper"},on:{dragging:function(t){return e.onRepositioning()},dragStopped:function(t){return e.updatePinPosition()}},nativeOn:{click:function(t){return t.preventDefault(),e.activate()}}})},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),r=i("2f62"),c=i("f744"),a=i("82bb"),l=i("46a0");function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var p={name:"comment-pin",components:{dragger:a["a"]},props:{allowPositionChange:{type:Boolean,default:!1},comment:{type:l["a"],required:!0}},data:function(){return{isActive:!1,isProcessing:!1}},computed:d({},Object(r["d"])({scaleFactor:function(e){return e.screens.scaleFactor}})),methods:d({},Object(r["b"])({removeComment:"comments/removeComment"}),{activate:function(){var e=this;this.isActive||(this.$emit("beforeActivate",this.comment,this.$el),this.isActive=!0,this.$nextTick(function(){e.positionWithinView()}),this.$emit("activated",this.comment,this.$el))},deactivate:function(){this.isActive&&(this.isActive=!1,this.$emit("beforeDeactivate",this.comment,this.$el),this.comment.id||this.removeComment(this.comment.id),this.$emit("deactivated",this.comment,this.$el))},positionWithinView:function(){this.$el.scrollIntoView({behavior:"smooth",block:"nearest"})},updatePinPosition:function(){var e=this;this.comment.left=this.$el.offsetLeft/this.scaleFactor,this.comment.top=this.$el.offsetTop/this.scaleFactor,this.comment.id&&(this.isProcessing=!0,c["a"].ScreenComments.update(this.comment.id,{left:this.comment.left,top:this.comment.top}).then(function(t){e.comment.load(t.data),e.$emit("commentUpdated",e.comment,e.$el)}).catch(function(t){e.$errResponseHandler(t)}).finally(function(){e.isProcessing=!1}))},onRepositioning:function(){this.$emit("repositioning",this.comment,this.$el)}})},h=p,u=i("2877"),f=Object(u["a"])(h,s,n,!1,null,null,null);t["a"]=f.exports},"82bb":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.dragInit(t)},touchstart:e.dragInit}},[e._t("default")],2)},n=[],o=(i("c5f6"),{name:"dragger",props:{wrapperSelector:{type:String},tolerance:{type:Number,default:10},enable:{type:Boolean,default:!0}},data:function(){return{startX:0,startY:0,shiftX:0,shiftY:0,lockX:!1,lockY:!1,dragStarted:!1}},computed:{wrapper:function(){return this.$el.closest(this.wrapperSelector)||this.$el.parentNode}},methods:{dragInit:function(e){this.enable&&(e.stopPropagation(),this.startX=e.clientX,this.startY=e.clientY,this.shiftX=e.clientX-this.$el.offsetLeft,this.shiftY=e.clientY-this.$el.offsetTop,document.addEventListener("touchmove",this.onMove),document.addEventListener("mousemove",this.onMove),document.addEventListener("touchend",this.onDrop),document.addEventListener("mouseup",this.onDrop))},onMove:function(e){var t=e.clientX-this.startX,i=e.clientY-this.startY,s=e.clientX-this.shiftX,n=e.clientY-this.shiftY;if(!(!this.dragStarted&&Math.abs(s-this.$el.offsetLeft)<this.tolerance&&Math.abs(n-this.$el.offsetTop)<this.tolerance)){if(e.preventDefault(),this.dragStarted||(this.dragStarted=!0,this.$el.classList.add("no-pointer-events"),this.wrapper.classList.add("dragging"),this.$emit("dragStarted",e)),this.$emit("dragging",e),e.shiftKey?this.lockX||this.lockY||(Math.abs(t)>Math.abs(i)?(this.lockX=!1,this.lockY=!0):(this.lockX=!0,this.lockY=!1)):(this.lockX=!1,this.lockY=!1),!this.lockX){var o=this.wrapper.scrollWidth||this.wrapper.offsetWidth;s+this.$el.offsetWidth>o&&(s=o-this.$el.offsetWidth),s=s<0?0:s,this.$el.style.left=s+"px"}if(!this.lockY){var r=this.wrapper.scrollHeight||this.wrapper.offsetHeight;n+this.$el.offsetHeight>r&&(n=r-this.$el.offsetHeight),n=n<0?0:n,this.$el.style.top=n+"px"}}},onDrop:function(e){this.dragStarted&&(e.preventDefault(),this.dragStarted=!1,this.lockX=!1,this.lockY=!1,this.$el.classList.remove("no-pointer-events"),this.wrapper.classList.remove("dragging"),this.$emit("dragStopped",e)),document.removeEventListener("touchmove",this.onMove),document.removeEventListener("mousemove",this.onMove),document.removeEventListener("touchend",this.onDrop),document.removeEventListener("mouseup",this.onDrop)}}}),r=o,c=i("2877"),a=Object(c["a"])(r,s,n,!1,null,null,null);t["a"]=a.exports},"9aaf":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"previewPanel"}},[e.isActive&&e.screens.length?i("div",{staticClass:"preview-screens-panel",on:{"&!wheel":function(t){return e.verticalToHorizontalScroll(t)}}},[i("div",{staticClass:"thumbs-list"},e._l(e.orderedScreens,function(t){return i("figure",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.title,expression:"screen.title",modifiers:{top:!0}}],key:"thumb_"+t.id,staticClass:"thumb thumb-handle screen-thumb",class:{active:e.activeScreenId==t.id},on:{click:function(i){return i.preventDefault(),e.setActiveScreenId(t.id)}}},[t.getImage("small")?i("img",{staticClass:"img",attrs:{src:t.getImage("small"),alt:t.title}}):i("i",{staticClass:"fe fe-image img"})])}),0)]):e._e()])},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),r=i("2f62");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var l={name:"screens-panel",data:function(){return{isActive:!1}},computed:a({},Object(r["d"])({screens:function(e){return e.screens.screens},activeScreenId:function(e){return e.screens.activeScreenId}}),{},Object(r["c"])({orderedScreens:"screens/orderedScreens"})),watch:{activeScreenId:function(e,t){e!==t&&this.isActive&&this.scrollToActiveScreenThumb()}},methods:a({},Object(r["b"])({setActiveScreenId:"screens/setActiveScreenId"}),{show:function(){this.isActive=!0,this.scrollToActiveScreenThumb()},hide:function(){this.isActive=!1},toggle:function(){this.isActive?this.hide():this.show()},scrollToActiveScreenThumb:function(){var e=this;this.$nextTick(function(){if(e.isActive&&e.$el){var t=15,i=e.$el,s=i?i.querySelector(".screen-thumb.active"):null;if(s){var n=s.offsetLeft,o=n+s.offsetWidth,r=i.scrollLeft,c=r+i.offsetWidth;n-t<r?i.scrollLeft=n-t:o+t>c&&(i.scrollLeft=r-(c-(o+t)))}}})},verticalToHorizontalScroll:function(e){if("wheel"==e.type&&this.$el){var t=(e.deltaY||-e.wheelDelta||e.detail)>>10||1;t*=-300,this.$el.scrollLeft-=t}}})},m=l,d=i("2877"),p=Object(d["a"])(m,s,n,!1,null,null,null);t["a"]=p.exports},af83:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"popover-holder comment-popover-holder"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"popover-overlay",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.close()}}}),i("div",{ref:"popover",staticClass:"popover comment-popover",class:{active:e.isActive}},[e.comment.id?i("div",{staticClass:"form-group resolved-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.comment.status,expression:"comment.status"}],attrs:{type:"checkbox",id:"mark_as_resoved_"+e.comment.id,"true-value":"resolved","false-value":"pending"},domProps:{checked:Array.isArray(e.comment.status)?e._i(e.comment.status,null)>-1:e._q(e.comment.status,"resolved")},on:{change:[function(t){var i=e.comment.status,s=t.target,n=s.checked?"resolved":"pending";if(Array.isArray(i)){var o=null,r=e._i(i,o);s.checked?r<0&&e.$set(e.comment,"status",i.concat([o])):r>-1&&e.$set(e.comment,"status",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.comment,"status",n)},function(t){return e.saveCommentStatus()}]}}),i("label",{attrs:{for:"mark_as_resoved_"+e.comment.id}},[e._v(e._s(e.$t("Mark as resolved")))])]):e._e(),e.isLoadingReplies?i("div",{staticClass:"block txt-center txt-hint p-small"},[i("span",{staticClass:"loader"})]):e._e(),!e.isLoadingReplies&&e.comment.id?i("div",{ref:"commentsListContainer",staticClass:"comments-list"},e._l(e.commentsList,function(t){return i("div",{key:"reply_"+t.id,staticClass:"comment-list-item",class:{primary:t.isPrimary}},[i("figure",{staticClass:"avatar"},[t.user&&t.user.getAvatar("small")?i("img",{attrs:{src:t.user.getAvatar("small"),alt:"User avatar"}}):i("i",{staticClass:"fe fe-user"})]),i("div",{staticClass:"content"},[i("small",[i("span",{staticClass:"name"},[e._v(e._s(t.user?t.user.identifier:t.from))]),i("span",{staticClass:"date txt-hint m-l-5"},[e._v(e._s(t.createdAtFromNow))])]),i("div",{staticClass:"message"},[e._v(e._s(t.message))])]),i("div",{staticClass:"list-ctrls"},[e.isForPreview?e._e():i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.$t("Delete"),expression:"$t('Delete')",modifiers:{top:!0}}],staticClass:"list-ctrl-item ctrl-danger",on:{click:function(i){return i.preventDefault(),e.deleteComment(t.id)}}},[i("i",{staticClass:"fe fe-trash"})])])])}),0):e._e(),i("form",{ref:"messageForm",staticClass:"comment-message-form",on:{submit:function(e){e.preventDefault()}}},[e.isForPreview?i("form-field",{staticClass:"email-field",attrs:{name:"from",showErrorMsg:!0}},[i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-addon p-l-small p-r-0 m-r-0"},[i("i",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:e.$t("From (email)"),expression:"$t('From (email)')",modifiers:{left:!0}}],staticClass:"fe fe-mail"})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.from,expression:"from"}],staticClass:"p-l-10",attrs:{type:"email",required:"",placeholder:e.$t("Your email")},domProps:{value:e.from},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||(e.from=t.target.value)}}})])]):e._e(),i("form-field",{staticClass:"message-field",attrs:{name:"message",showErrorMsg:!1}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"messageField",attrs:{required:"",placeholder:e.$t("Write a comment (@ to mention)")},domProps:{value:e.message},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.addComment()):null},input:function(t){t.target.composing||(e.message=t.target.value)}}}),i("mentions-list",{ref:"mentionsList",staticClass:"dropdown-compact input-dropdown",attrs:{list:e.mentionsList}})],1),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$t("Add comment (Ctrl+Enter)"),expression:"$t('Add comment (Ctrl+Enter)')",modifiers:{bottom:!0}}],staticClass:"submit-icon",on:{click:function(t){return t.preventDefault(),e.addComment()}}},[e.isProcessing?i("span",{staticClass:"loader"}):i("i",{staticClass:"fe fe-send"})])],1)])])},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("55dd"),i("bd86")),r=i("2f62"),c=i("0abc"),a=i("3d48"),l=i("dd93"),m=i("f744"),d=i("46a0"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown",class:{active:e.isActive}},[e._l(e.filteredList,function(t,s){return[i("div",{ref:"mentions",refInFor:!0,staticClass:"dropdown-item",class:{highlight:e.focusIndex==s},on:{click:function(t){return t.preventDefault(),e.select(s)}}},[e._v(e._s(t.label))]),s+1!=e.filteredList.length?i("hr"):e._e()]})],2)},h=[],u=(i("a481"),{name:"mentions-list",props:{list:{type:Array,required:!0},triggers:{type:Array,default:function(){return["+","@"]}},input:{}},data:function(){return{isActive:!1,focusIndex:0,filteredList:[]}},computed:{inputElem:function(){return this.input instanceof Node?this.input:this.input&&l["a"].isString(this.input)&&document.querySelector(this.input)?document.querySelector(this.input):this.$el.parentNode.querySelector("textarea, input")}},mounted:function(){this.inputElem?(this.inputElem.addEventListener("input",this.onInputChange),this.inputElem.addEventListener("keydown",this.onInputKeydown)):console.warn("MentionsList: input element is invalid or missing.")},beforeDestroy:function(){this.inputElem&&(this.inputElem.removeEventListener("input",this.onInputChange),this.inputElem.removeEventListener("keydown",this.onInputKeydown))},methods:{hide:function(){this.isActive&&(this.isActive=!1,this.focusIndex=0,this.filteredList=[],this.$emit("hide"))},show:function(){this.isActive||(this.isActive=!0,this.focusIndex=0,this.$emit("show"),this.positionFocusedMendtionWithinView())},focusPrev:function(){this.focusIndex<=0?this.focusIndex=this.filteredList.length-1:this.focusIndex--,this.positionFocusedMendtionWithinView()},focusNext:function(){this.focusIndex>=this.filteredList.length-1?this.focusIndex=0:this.focusIndex++,this.positionFocusedMendtionWithinView()},positionFocusedMendtionWithinView:function(){this.$refs.mentions&&this.$refs.mentions[this.focusIndex]&&this.$refs.mentions[this.focusIndex].scrollIntoView({block:"nearest"})},getCurrentWordInfo:function(){var e="undefined"!==typeof this.inputElem.selectionStart?this.inputElem.selectionStart:this.inputElem.value.length,t=l["a"].getWordInfoAt(this.inputElem.value,e-1);return t},select:function(e){var t=this;e="undefined"!==typeof e?e:this.focusIndex;var i=this.getCurrentWordInfo();if(i.word&&this.inputElem&&this.filteredList[e]){var s=this.inputElem.value;this.inputElem.value=s.substring(0,i.start)+this.triggers[0]+this.filteredList[e].value+s.substring(i.end+1)+" ",this.inputElem.dispatchEvent(new Event("input")),this.$nextTick(function(){t.inputElem.focus(),t.hide()})}},filterList:function(e){if(e=(e||"").toLowerCase().replace(/\s+/g,""),!e)return this.list;for(var t=[],i=this.list.length-1;i>=0;i--){var s=(this.list[i].value+this.list[i].label||"").toLowerCase().replace(/\s+/g,"");s.indexOf(e)>=0&&t.push(this.list[i])}return t},onInputChange:function(e){var t=this.getCurrentWordInfo();this.hide(),t.word&&this.triggers.indexOf(t.word[0])>=0&&(this.filteredList=this.filterList(t.word.substring(1)),this.filteredList.length&&this.show())},onInputKeydown:function(e){if(this.isActive){var t=e.which||e.keyCode;13==t?(e.preventDefault(),this.select()):38==t?(e.preventDefault(),this.focusPrev()):40==t&&(e.preventDefault(),this.focusNext())}}}}),f=u,v=i("2877"),g=Object(v["a"])(f,p,h,!1,null,null,null),y=g.exports;function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var w={name:"comment-popover",components:{"mentions-list":y},props:{mentionsList:{type:Array,default:function(){return[]}},isForPreview:{type:Boolean,default:!0}},data:function(){return{isActive:!1,isProcessing:!1,isLoadingReplies:!1,comment:new d["a"],replies:[],message:"",from:""}},computed:C({},Object(r["d"])({previewToken:function(e){return e.preview.previewToken}}),{},Object(r["c"])({getUnreadComment:"notifications/getUnreadComment",getUnreadCommentsForComment:"notifications/getUnreadCommentsForComment"}),{commentsList:function(){var e=this.replies.slice();return this.comment.id&&e.unshift(this.comment),e.sort(function(e,t){return Date.parse(e["createdAt"])-Date.parse(t["createdAt"])}),e},unreadCommentReplies:function(){return this.getUnreadCommentsForComment(this.comment.id)}}),watch:{commentsList:function(e,t){var i=this;this.$nextTick(function(){setTimeout(function(){i.reposition()},100)})},unreadCommentReplies:function(e,t){var i=this;if(e){for(var s in e)l["a"].pushUnique(this.replies,e[s]);e.length&&this.isActive&&this.$nextTick(function(){i.scrollToLastComment(),i.readComments(i.commentsList,500)})}}},mounted:function(){document.addEventListener("scroll",this.onEventPopoverReposition,{capture:!0,passive:!0}),window.addEventListener("resize",this.onEventPopoverReposition,{passive:!0}),this.from=a["a"].getItem(c["a"].get("VUE_APP_PREVIEW_COMMENT_FROM_STORAGE_KEY"))||l["a"].getNestedVal(this.$store,"state.user.user.email","")},beforeDestroy:function(){document.removeEventListener("scroll",this.onEventPopoverReposition,{capture:!0}),window.removeEventListener("resize",this.onEventPopoverReposition)},methods:C({},Object(r["b"])({removeComment:"comments/removeComment",removeUnreadComment:"notifications/removeUnreadComment",markAsRead:"notifications/markAsRead"}),{resetForm:function(){this.message=""},open:function(e,t){var i=this;this.isActive||(this.isActive=!0,this.replies=[],e instanceof d["a"]?this.comment=e:this.comment=new d["a"](e),this.resetForm(),this.loadReplies(),t&&this.reposition(t),!this.comment.id&&this.$refs.messageField&&setTimeout(function(){i.$refs.messageField&&i.$refs.messageField.focus()},100),this.$emit("opened"))},close:function(){this.isActive&&(this.isActive=!1,this.comment.id||this.removeComment(this.comment.id),this.$refs.mentionsList&&this.$refs.mentionsList.hide(),this.$emit("closed"))},onEventPopoverReposition:function(e){this.isActive&&this.reposition()},reposition:function(e){if(e=e||document.querySelector('.comment-pin[data-id="'+this.comment.id+'"]'),this.isActive&&e){var t=this.$refs.popover,i=e.getBoundingClientRect(),s=5,n=i.top-s,o=i.left+i.width+s;t.style.left="0px",t.style.top="0px",o+t.offsetWidth>document.documentElement.clientWidth&&(o=i.left-t.offsetWidth-s),o=o>=0?o:0,n+t.offsetHeight>document.documentElement.clientHeight&&(n=document.documentElement.clientHeight-t.offsetHeight),n=n>=0?n:0,t.style.left=o+"px",t.style.top=n+"px"}},loadReplies:function(){var e,t=this;!this.isLoadingReplies&&this.comment.id&&(this.isLoadingReplies=!0,m["a"].enableAutoCancellation(!1),e=this.isForPreview?m["a"].Previews.getScreenCommentsList(this.previewToken,1,199,{"search[screenId]":this.comment.screenId,"search[replyTo]":this.comment.id}):m["a"].ScreenComments.getList(1,199,{"search[screenId]":this.comment.screenId,"search[replyTo]":this.comment.id}),e.then(function(e){t.replies=d["a"].createInstances(e.data),t.readComments(t.commentsList)}).catch(function(e){t.$errResponseHandler(e)}).finally(function(){t.isLoadingReplies=!1}))},deleteComment:function(e){if(!this.isForPreview){var t=l["a"].findByKey(this.replies,"id",e),i="";i=t&&t.isPrimary?this.$t("Do you really want to deleted the selected comment and all its replies?"):this.$t("Do you really want to deleted the selected comment?"),t&&window.confirm(i)&&(this.$toast(this.$t("Successfully deleted comment.")),l["a"].removeByKey(this.replies,"id",e),this.removeComment(e),this.comment.id==e&&this.close(),m["a"].ScreenComments.delete(e))}},addComment:function(){var e=this;if(!this.isProcessing&&this.message){var t;this.isProcessing=!0;var i=this.comment.id||null;t=this.isForPreview?m["a"].Previews.createScreenComment(this.previewToken,{replyTo:i,screenId:this.comment.screenId,left:this.comment.left,top:this.comment.top,message:this.message,from:this.from}):m["a"].ScreenComments.create({replyTo:i,screenId:this.comment.screenId,left:this.comment.left,top:this.comment.top,message:this.message}),t.then(function(t){a["a"].setItem(c["a"].get("VUE_APP_PREVIEW_COMMENT_FROM_STORAGE_KEY"),e.from),e.resetForm(),e.$toast(e.$t("Successfully added new comment."));var s=i?new d["a"]:e.comment;s.load(t.data),s.isReply?(e.replies.push(s),e.$nextTick(function(){e.scrollToLastComment()})):e.close(),e.$emit("commentCreated",s)}).catch(function(t){e.$errResponseHandler(t)}).finally(function(){e.isProcessing=!1})}else this.$refs.messageForm&&l["a"].isFunction(this.$refs.messageForm.reportValidity)&&this.$refs.messageForm.reportValidity()},saveCommentStatus:function(){var e,t=this;!this.isProcessing&&this.comment.id&&(this.isProcessing=!0,e=this.isForPreview?m["a"].Previews.updateScreenComment(this.previewToken,this.comment.id,{status:this.comment.status}):m["a"].ScreenComments.update(this.comment.id,{status:this.comment.status}),e.then(function(e){t.comment.load(e.data),t.$toast(t.$t("Successfully updated comment state.")),t.comment.isResolved&&t.close(),t.$emit("commentUpdated",t.comment)}).catch(function(e){t.$errResponseHandler(e)}).finally(function(){t.isProcessing=!1}))},scrollToLastComment:function(){if(this.$refs.commentsListContainer){var e=this.$refs.commentsListContainer.querySelector(".comment-list-item:last-child");e&&this.$refs.commentsListContainer.scrollTo({behavior:"smooth",top:e.offsetTop})}},readComments:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;setTimeout(function(){for(var i=e.length-1;i>=0;i--)t.getUnreadComment(e[i].id)&&(t.previewToken?t.removeUnreadComment(e[i].id):t.markAsRead(e[i].id))},i)}})},b=w,O=Object(v["a"])(b,s,n,!1,null,null,null);t["a"]=O.exports},c647:function(e,t,i){"use strict";i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),n=i("2f62"),o=i("f744"),r=i("dd93");i("49cb");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}t["a"]={data:function(){return{isPreviewModeHintsActive:!1,isLoadingHotspots:!1,isLoadingHotspotTemplates:!1}},computed:a({},Object(n["d"])({activePrototypeId:function(e){return e.prototypes.activePrototypeId},hotspots:function(e){return e.hotspots.hotspots},hotspotTemplates:function(e){return e.hotspots.hotspotTemplates}}),{},Object(n["c"])({getHotspot:"hotspots/getHotspot",getHotspotTemplate:"hotspots/getHotspotTemplate",getHotspotsForScreen:"hotspots/getHotspotsForScreen"})),methods:a({},Object(n["b"])({setHotspots:"hotspots/setHotspots",appendHotspots:"hotspots/appendHotspots",setHotspotTemplates:"hotspots/setHotspotTemplates"}),{loadHotspots:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e=e||this.activePrototypeId,e&&!this.isLoadingHotspots&&(this.isLoadingHotspots=!0,o["a"].Hotspots.getList(i,200,{envelope:!0,"search[prototypeId]":e}).then(function(s){var n=r["a"].getNestedVal(s,"data.response",[]),o=r["a"].getNestedVal(s,"data.headers.x-pagination-current-page",1),c=r["a"].getNestedVal(s,"data.headers.x-pagination-page-count",1);1==i?t.setHotspots(n):t.appendHotspots(n),c>o&&t.loadHotspots(e,i+1)}).catch(function(e){t.$errResponseHandler(e)}).finally(function(){t.isLoadingHotspots=!1}))},loadHotspotTemplates:function(e){var t=this;e=e||this.activePrototypeId,e&&!this.isLoadingHotspotTemplates&&(this.isLoadingHotspotTemplates=!0,o["a"].HotspotTemplates.getList(1,100,{expand:"screenIds","search[prototypeId]":e}).then(function(e){t.setHotspotTemplates(e.data||[])}).catch(function(e){t.$errResponseHandler(e)}).finally(function(){t.isLoadingHotspotTemplates=!1}))},blinkPreviewModeHints:function(){var e=this;this.isPreviewModeHintsActive=!0,this.previewModeHintsTimeoutId&&clearTimeout(this.previewModeHintsTimeoutId),this.previewModeHintsTimeoutId=setTimeout(function(){e.isPreviewModeHintsActive=!1},500)}})}}}]);